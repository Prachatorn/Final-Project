mutate(
year_2007 = num_arrival[, 1],
year_2008 = num_arrival[, 2],
year_2009 = num_arrival[, 3],
year_2010 = num_arrival[, 4],
year_2011 = num_arrival[, 5],
year_2012 = num_arrival[, 6],
year_2013 = num_arrival[, 7],
year_2014 = num_arrival[, 8],
year_2015 = num_arrival[, 9],
year_2016 = num_arrival[, 10],
code = arrival[, 12]
)
country_arrival <- arrival %>%
select(
country
)
suppressWarnings(num_arrival <- data.matrix(affirmative[2:11]))
country_arrival <- country_arrival %>%
mutate(
year_2007 = num_arrival[, 1],
year_2008 = num_arrival[, 2],
year_2009 = num_arrival[, 3],
year_2010 = num_arrival[, 4],
year_2011 = num_arrival[, 5],
year_2012 = num_arrival[, 6],
year_2013 = num_arrival[, 7],
year_2014 = num_arrival[, 8],
year_2015 = num_arrival[, 9],
year_2016 = num_arrival[, 10],
code = arrival[, 12]
)
suppressWarnings(num_arrival <- data.matrix(affirmative[2:11]))
country_arrival <- country_arrival %>%
mutate(
year_2007 = num_arrival[, 1],
year_2008 = num_arrival[, 2],
year_2009 = num_arrival[, 3],
year_2010 = num_arrival[, 4],
year_2011 = num_arrival[, 5],
year_2012 = num_arrival[, 6],
year_2013 = num_arrival[, 7],
year_2014 = num_arrival[, 8],
year_2015 = num_arrival[, 9],
year_2016 = num_arrival[, 10],
code = arrival[, 11]
)
country_arrival <- read.csv("Refugees/country_arrivals_2.csv",
stringsAsFactors = F)
View(country_arrival)
colnames(country_arrival)[colnames(country_arrival) ==
"Ã¯..Country"] <- "country"
arrival <- country_arrival %>%
filter(CODE != "NA")
arrival[arrival == "-"] <- 0
arrival[arrival == "D"] <- 0
arrival[arrival == "X"] <- 0
arrival <- arrival %>%
rename_at(
vars(starts_with("X")),
funs(sub("X", "year_", .))
)
arrival$year_2007 <- gsub(",", "", arrival$year_2007)
arrival$year_2008 <- gsub(",", "", arrival$year_2008)
arrival$year_2009 <- gsub(",", "", arrival$year_2009)
arrival$year_2010 <- gsub(",", "", arrival$year_2010)
arrival$year_2011 <- gsub(",", "", arrival$year_2011)
arrival$year_2012 <- gsub(",", "", arrival$year_2012)
arrival$year_2013 <- gsub(",", "", arrival$year_2013)
arrival$year_2014 <- gsub(",", "", arrival$year_2014)
arrival$year_2015 <- gsub(",", "", arrival$year_2015)
arrival$year_2016 <- gsub(",", "", arrival$year_2016)
country_arrival <- arrival %>%
select(
country
)
suppressWarnings(num_arrival <- data.matrix(affirmative[2:11]))
suppressWarnings(num_arrival <- data.matrix(arrival[2:11]))
country_arrival <- country_arrival %>%
mutate(
year_2007 = num_arrival[, 1],
year_2008 = num_arrival[, 2],
year_2009 = num_arrival[, 3],
year_2010 = num_arrival[, 4],
year_2011 = num_arrival[, 5],
year_2012 = num_arrival[, 6],
year_2013 = num_arrival[, 7],
year_2014 = num_arrival[, 8],
year_2015 = num_arrival[, 9],
year_2016 = num_arrival[, 10],
code = arrival[, 11]
)
affirmative_country <- data.frame(affirmative_country)
country_arrival <- country_arrival %>%
mutate(
year_2007 = num_arrival[, 1],
year_2008 = num_arrival[, 2],
year_2009 = num_arrival[, 3],
year_2010 = num_arrival[, 4],
year_2011 = num_arrival[, 5],
year_2012 = num_arrival[, 6],
year_2013 = num_arrival[, 7],
year_2014 = num_arrival[, 8],
year_2015 = num_arrival[, 9],
year_2016 = num_arrival[, 10],
code = arrival[, 11]
)
affirmative_country <- data.frame(affirmative_country)
arrival_country <- data.frame(arrival_country)
country_arrival <- data.frame(country_arrival)
arrival_map <- function(years) {
affirm_map <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Reds",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Affirmative Asylums to the US From Around The World",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(affirm_map)
}
arrival_map <- function(years) {
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Reds",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Affirmative Asylums to the US From Around The World",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(affirm_map)
}
arrival_map(2007)
return(map_arrival)
arrival_map <- function(years) {
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Reds",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Affirmative Asylums to the US From Around The World",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(map_arrivals)
}
arrival_map(2007)
arrival_map <- function(years) {
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Reds",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Affirmative Asylums to the US From Around The World",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(map_arrival)
}
arrival_map(2007)
arrival_map <- function(years) {
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Greens",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Affirmative Asylums to the US From Around The World",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(map_arrival)
}
arrival_map(2007)
country_arrival <- data.frame(country_arrival)
country_arrival <- country_arrival %>%
mutate(
year_2007 = num_arrival[, 1],
year_2008 = num_arrival[, 2],
year_2009 = num_arrival[, 3],
year_2010 = num_arrival[, 4],
year_2011 = num_arrival[, 5],
year_2012 = num_arrival[, 6],
year_2013 = num_arrival[, 7],
year_2014 = num_arrival[, 8],
year_2015 = num_arrival[, 9],
year_2016 = num_arrival[, 10],
code = arrival[, 12]
)
country_arrival <- data.frame(country_arrival)
arrival_map <- function(years) {
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Greens",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Affirmative Asylums to the US From Around The World",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(map_arrival)
}
arrival_map(2007)
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Greens",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Arriving immigrants to the US From different Countries",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
arrival_map <- function(years) {
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Greens",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Arriving immigrants to the US From different Countries",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(map_arrival)
}
arrival_map(2007)
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Greens",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Arriving Immigrants to the US From different Countries",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
arrival_map <- function(years) {
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Greens",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Arriving Immigrants to the US From different Countries",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(map_arrival)
}
arrival_map(2007)
arrival_map <- function(years) {
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Greens",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Arriving Immigrants to the US From different Countries",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(map_arrival)
}
arrival_map(2007)
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Greens",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Arriving Immigrants to the US From Different Countries",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
arrival_map <- function(years) {
map_arrival <- plot_geo(country_arrival) %>%
add_trace(
z = ~get(paste0("year_", years)),
color = ~get(paste0("year_", years)),
colors = "Greens",
text = ~country,
locations = ~code,
marker = list(
line = list(
color = toRGB("black"),
width = 0.5
)
)
) %>%
colorbar(
title = "# Of People"
) %>%
layout(
title = "Arriving Immigrants to the US From Different Countries",
geo = list(
showframe = FALSE,
showcoastlines = TRUE,
projection = list(type = "Mercator")
)
)
return(map_arrival)
}
arrival_map(2007)
source('C:/Users/somch/OneDrive - UW/Infomatics/INFO 201 - Technical Foundations/Final Project/Final-Project/world_map.R', echo=TRUE)
affirmative_map(2007)
t(arrival, header = F)
?t()
arrival_map(2007)
caps <- data.frame("Year" = c(2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015,
2016), "Cap" = c(80000, 80000, 80000, 80000, 76000,
70000, 70000, 70000, 85000),
"Admitted" = c(60107, 74602, 73293, 56384, 58179, 69909,
69975, 69920, 84989))
regional_arrivals <- read.csv("Refugees/regional_arrivals.csv",
stringsAsFactors = F)
setnames(regional_arrivals, old=c("X2007","X2008", "X2009", "X2010", "X2011",
source("world_map.R")
source("world_map.R")
setwd("C:/Users/somch/OneDrive - UW/Infomatics/INFO 201 - Technical Foundations/Final Project/Final-Project")
source("world_map.R")
source("world_map.R")
output$maps <- renderPlotly ({
return(country_arrival(input$year))
})
